<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title></title>
<style type="text/css">
.popup_button {
  width: 100%;
}

#popup_menu {
  position: absolute;
  width: 100px;
}
</style>
</head>
<body>
  <div>
    <img id="image"src="./test.png"/>
    <div id="popup_menu">
      <button class="popup_button" id="button_a">A</button>
      <button class="popup_button" id="button_b">B</button>
    </div>
    </div>
<script>
  var menu = document.getElementById("popup_menu");
  document.getElementById('button_a').addEventListener('mouseup', (e)=>{console.log("A"); menu.style.visibility="hidden"; } );
  document.getElementById('button_b').addEventListener('mouseup', (e)=>{console.log("B"); menu.style.visibility="hidden"; } );
  document.getElementById('image').addEventListener('mouseup', on_mouseup );

  menu.style.visibility="hidden";

  function on_mouseup(e){
    menu.style.visibility="visible";
    console.log(e.offsetX, e.offsetY);
    x = e.offsetX;
    y = e.offsetY + 10;
    menu.style.top = `${y}px`;
    menu.style.left = `${x}px`;
  };
</script>
</body>
</html>